(self.webpackChunk=self.webpackChunk||[]).push([[879],{7879:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(7757),r=s.n(a),i=s(629),c=s(3299);function l(e,t,s,a,r,i,c){try{var l=e[i](c),n=l.value}catch(e){return void s(e)}l.done?t(n):Promise.resolve(n).then(a,r)}function n(e){return function(){var t=this,s=arguments;return new Promise((function(a,r){var i=e.apply(t,s);function c(e){l(i,a,r,c,n,"next",e)}function n(e){l(i,a,r,c,n,"throw",e)}c(void 0)}))}}function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const v={data:function(){return{dtTable:null,selectedItems:[],allSelected:!1}},watch:{selectedItems:function(){this.allSelected=this.selectedItems.length===this.allUsers.length}},computed:o(o({getIsLoading:function(){return this.isLoading.get},postIsLoading:function(){return this.isLoading.post}},(0,i.Se)("auth",["authUser"])),(0,i.Se)("users",["allUsers","isLoading"])),methods:o({selectOrUnSelectAll:function(){var e=this;this.allSelected?this.selectedItems=[]:this.allUsers.forEach((function(t){e.selectedItems.push(t.id)}))},prepareBulkDeleteUsers:function(){var e=this;this.selectedItems.length?(0,c.f)(n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.bulkDeleteUsers(e.selectedItems);case 2:e.selectedItems=[];case 3:case"end":return t.stop()}}),t)})))):this.$toast.error("Aucun élément n'a été sélectionné")}},(0,i.nv)("users",["fetchUsers","deleteUser","bulkDeleteUsers"])),beforeUpdate:function(){this.dtTable&&this.dtTable.destroy()},updated:function(){this.dtTable=$("#dataTable").DataTable({order:[[0,"desc"]],pageLength:5})},created:function(){this.fetchUsers()}};const f=(0,s(1900).Z)(v,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-fluid"},[s("the-breadcrumb",[s("li",{staticClass:"breadcrumb-item active"},[e._v("Utilisateurs")])]),e._v(" "),s("div",{staticClass:"card card-sticker shadow mb-4 mt-5"},[s("div",{staticClass:"d-flex",attrs:{id:"card-header-wrapper"}},[e._m(0),e._v(" "),e._m(1),e._v(" "),e.authUser.is_admin?s("div",{staticClass:"ml-auto align-self-center p-3"},[s("button",{staticClass:"btn btn-outline-black mr-2",attrs:{disabled:e.postIsLoading},on:{click:e.prepareBulkDeleteUsers}},[e.postIsLoading?s("span",[s("i",{staticClass:"fa fa-circle-notch fa-spin"}),e._v(" En cours\n          ")]):s("span",[s("i",{staticClass:"fa fa-dumpster"}),e._v(" Suppression ")])]),e._v(" "),s("router-link",{attrs:{to:{name:"users.create"}}},[s("button",{staticClass:"btn btn-orange mr-2"},[s("i",{staticClass:"fa fa-plus-circle"}),e._v(" "),s("span",[e._v(" Ajouter Utilisateur")])])])],1):e._e()]),e._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-striped table-hover",attrs:{id:"dataTable",width:"100%",cellspacing:"0"}},[s("thead",[s("tr",[e.authUser.is_admin?s("th",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.allSelected,expression:"allSelected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.allSelected)?e._i(e.allSelected,null)>-1:e.allSelected},on:{click:e.selectOrUnSelectAll,change:function(t){var s=e.allSelected,a=t.target,r=!!a.checked;if(Array.isArray(s)){var i=e._i(s,null);a.checked?i<0&&(e.allSelected=s.concat([null])):i>-1&&(e.allSelected=s.slice(0,i).concat(s.slice(i+1)))}else e.allSelected=r}}})]):e._e(),e._v(" "),s("th",[e._v("ID")]),e._v(" "),s("th",[e._v("Nom")]),e._v(" "),s("th",[e._v("Email")]),e._v(" "),s("th",[e._v("Est Admin")]),e._v(" "),s("th",[e._v("Avatar")]),e._v(" "),s("th",[e._v("Rejoint le")]),e._v(" "),e.authUser.is_admin?s("th",[e._v("Actions")]):e._e()])]),e._v(" "),s("tbody",[e.getIsLoading?s("tr",[s("td",{staticClass:"text-center",attrs:{colspan:"6"}},[s("loading",{attrs:{color:"#2B51C4",active:e.getIsLoading,"is-full-page":!1},on:{"update:active":function(t){e.getIsLoading=t}}},[s("h5",{attrs:{slot:"after"},slot:"after"},[e._v("Loading")])])],1)]):e._l(e.allUsers,(function(t){return s("tr",{key:t.id},[e.authUser.is_admin?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedItems,expression:"selectedItems"}],attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.selectedItems)?e._i(e.selectedItems,t.id)>-1:e.selectedItems},on:{change:function(s){var a=e.selectedItems,r=s.target,i=!!r.checked;if(Array.isArray(a)){var c=t.id,l=e._i(a,c);r.checked?l<0&&(e.selectedItems=a.concat([c])):l>-1&&(e.selectedItems=a.slice(0,l).concat(a.slice(l+1)))}else e.selectedItems=i}}})]):e._e(),e._v(" "),s("td",[e._v(e._s(t.id))]),e._v(" "),s("td",[e._v(e._s(t.name))]),e._v(" "),s("td",[e._v(e._s(t.email))]),e._v(" "),s("td",[s("i",{class:[t.is_admin?"fa fa-check text-success":"fa fa-times text-danger"]})]),e._v(" "),s("td",[s("img",{staticClass:"img-fluid avatar",attrs:{src:t.avatar}})]),e._v(" "),s("td",[e._v(e._s(e._f("formatedDate")(t.created_at)))]),e._v(" "),e.authUser.is_admin?s("td",[s("router-link",{staticClass:"mr-4",attrs:{to:{name:"users.edit",params:{id:t.id}}}},[s("i",{staticClass:"fa fa-pen text-success"})]),e._v(" "),s("a",{attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.deleteUser(t.id)}}},[s("i",{staticClass:"fa fa-trash text-danger"})])],1):e._e()])}))],2)])])])])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header card-header-sticker bg-primary text-center"},[t("h6",{staticClass:"font-weight-bold text-white"},[t("i",{staticClass:"fa fa-clipboard-list fa-2x"})])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",{staticClass:"h4 mt-4 text-gray-800"},[e._v("Tableau des Utilisateurs")])])}],!1,null,null,null).exports}}]);